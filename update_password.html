<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Setting</title>
    <link rel="website icon" type="png" href="assets/logo_prscope.png" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .dark {
        background-color: #1a202c;
        color: #cbd5e0;
      }
      .dark .bg-red-600 {
        background-color: #2d3748;
      }
      .dark .bg-gray-100 {
        background-color: #2d3748;
      }
      .dark .bg-gray-300 {
        background-color: #4a5568;
      }
    </style>
  </head>
  <body class="bg-gray-100">
    <!-- Navbar -->
    <header
      class="bg-red-600 text-white flex items-center justify-between px-6 py-4 fixed w-full top-0 z-50"
    >
      <div class="flex items-center space-x-4">
        <button onclick="toggleSidebar()" class="text-white text-2xl">â˜°</button>
        <button onclick="toggleDarkMode()" class="text-white text-lg">
          ðŸŒ™
        </button>
      </div>
      <div class="flex items-center space-x-6">
        <span class="relative">
          <span
            class="absolute -top-2 -right-2 bg-blue-600 text-white text-xs px-2 rounded-full"
            >6</span
          >
          ðŸ””
        </span>
        <select class="bg-transparent text-white">
          <option>English</option>
          <option>Indonesia</option>
        </select>
        <div class="flex items-center space-x-2">
          <img
            src="assets/profile.png"
            class="rounded-full w-10 h-10"
            alt="User Profile"
          />
          <span>Yoga Pranata (Admin)</span>
        </div>
      </div>
    </header>

    <div class="flex min-h-screen">
      <!-- Sidebar -->
      <aside
        id="sidebar"
        class="w-64 bg-[#E8E8E8] text-black flex flex-col fixed top-16 left-0 h-[calc(100vh-4rem)] justify-between overflow-y-auto transition-transform duration-300"
      >
        <div>
          <div class="p-5 flex justify-center border-b border-gray-300">
            <img src="assets/logo.png" alt="Telkom Indonesia" class="h-20" />
          </div>
          <nav>
            <ul class="mt-4">
              <li class="px-5 py-3 hover:bg-gray-300 rounded-lg mx-2">
                <a href="index.html">Dashboard</a>
              </li>
              <li class="px-5 py-3 hover:bg-gray-300 rounded-lg mx-2">
                <a href="list.html">List Gedung</a>
              </li>
              <li class="px-5 py-3 hover:bg-gray-300 rounded-lg mx-2">
                <a href="tenant.html">List Tenant</a>
              </li>
              <li class="px-5 py-3 hover:bg-gray-300 rounded-lg mx-2">
                <a href="datavisit.html">Data Visit</a>
              </li>
              <li class="px-5 py-3 hover:bg-gray-300 rounded-lg mx-2">
                <a href="worksheet.html">Work Sheet</a>
              </li>
            </ul>
          </nav>
        </div>
        <div class="mb-6 border-t border-gray-300 px-5 pt-4">
          <a
            href="setting.html"
            class="block text-center bg-red-600 text-white font-medium rounded-md py-2 mb-2 hover:bg-red-700"
            >Setting</a
          >
          <a
            href="login.html"
            onclick="return confirmLogout()"
            class="block text-center text-black hover:underline"
            >Logout</a
          >
        </div>
      </aside>

      <!-- Main Content -->
      <main id="main-content" class="flex-1 ml-64 mt-16 p-6">
        <h1 class="text-3xl font-semibold mb-6">Pengaturan</h1>
        <div class="flex flex-wrap gap-4">
          <button
            onclick="showContent('akun', event)"
            class="tab-btn px-4 py-2 rounded-lg bg-white text-black font-semibold"
          >
            Akun
          </button>
          <button
            onclick="showContent('notifikasi', event)"
            class="tab-btn px-4 py-2 rounded-lg bg-white text-black font-semibold"
          >
            Notifikasi
          </button>
          <button
            onclick="showContent('keamanan', event)"
            class="tab-btn px-4 py-2 rounded-lg bg-white text-black font-semibold"
          >
            Keamanan
          </button>
          <button
            onclick="showContent('tentang', event)"
            class="tab-btn px-4 py-2 rounded-lg bg-white text-black font-semibold"
          >
            Tentang
          </button>
        </div>

        <!-- Konten Keamanan -->
        <div id="keamanan" class="content-section mt-6 hidden">
          <h2 class="text-xl font-semibold mb-4">Ubah Kata Sandi</h2>
          <form
            onsubmit="return validatePasswordChange(event)"
            class="space-y-5 max-w-md"
          >
            <div>
              <label for="current-password" class="block text-gray-700 mb-1"
                >Kata Sandi Saat Ini</label
              >
              <input
                type="password"
                id="current-password"
                class="w-full px-4 py-2 rounded-lg bg-gray-100 border focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="Masukkan kata sandi lama"
                required
              />
            </div>
            <div>
              <label for="new-password" class="block text-gray-700 mb-1"
                >Kata Sandi Baru</label
              >
              <input
                type="password"
                id="new-password"
                class="w-full px-4 py-2 rounded-lg bg-gray-100 border focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="Masukkan kata sandi baru"
                required
              />
            </div>
            <div>
              <label for="confirm-password" class="block text-gray-700 mb-1"
                >Konfirmasi Kata Sandi Baru</label
              >
              <input
                type="password"
                id="confirm-password"
                class="w-full px-4 py-2 rounded-lg bg-gray-100 border focus:outline-none focus:ring-2 focus:ring-blue-500"
                placeholder="Ulangi kata sandi baru"
                required
              />
            </div>
            <button
              type="submit"
              class="w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 rounded-lg transition duration-200"
            >
              Simpan Perubahan
            </button>
          </form>
        </div>

        <!-- Konten Dummy (jika mau ditambah lain waktu) -->
        <div id="akun" class="content-section mt-6 hidden">Akun Content</div>
        <div id="notifikasi" class="content-section mt-6 hidden">
          Notifikasi Content
        </div>
        <div id="tentang" class="content-section mt-6 hidden">
          Tentang Content
        </div>
      </main>
    </div>

    <script>
      function toggleSidebar() {
        document
          .getElementById("sidebar")
          .classList.toggle("-translate-x-full");
        document.getElementById("main-content").classList.toggle("ml-64");
      }

      function toggleDarkMode() {
        document.body.classList.toggle("dark");
        localStorage.setItem(
          "theme",
          document.body.classList.contains("dark") ? "dark" : "light"
        );
      }

      function confirmLogout() {
        return confirm("Apakah Anda yakin ingin logout?");
      }

      function showContent(section, event) {
        document
          .querySelectorAll(".content-section")
          .forEach((div) => div.classList.add("hidden"));
        document.getElementById(section).classList.remove("hidden");

        document.querySelectorAll(".tab-btn").forEach((btn) => {
          btn.classList.remove("bg-red-100");
          btn.classList.add("bg-white");
        });

        if (event && event.target) {
          event.target.classList.remove("bg-white");
          event.target.classList.add("bg-red-100");
        }
      }

      function validatePasswordChange(event) {
        event.preventDefault();
        const newPassword = document.getElementById("new-password").value;
        const confirmPassword =
          document.getElementById("confirm-password").value;

        if (newPassword !== confirmPassword) {
          alert("Kata sandi baru dan konfirmasi tidak cocok.");
          return false;
        }

        alert("Kata sandi berhasil diubah!");

        // Redirect to setting.html with #keamanan in the URL
        window.location.href = "setting.html#keamanan"; // Arahkan ke setting.html dengan #keamanan pada URL

        return true;
      }

      window.onload = function () {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
          document.body.classList.add("dark");
        }

        // Buka tab berdasarkan hash (#keamanan)
        const hash = window.location.hash;
        const section = hash ? hash.replace("#", "") : "keamanan";
        const button = document.querySelector(`[onclick*="${section}"]`);
        if (button) {
          showContent(section, { target: button });
        }
      };
    </script>
  </body>
</html>
